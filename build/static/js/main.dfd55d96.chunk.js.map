{"version":3,"sources":["pages/Auth.module.css","components/Note.module.css","components/AddNote.module.css","layout/Nav.module.css","modals/EditModal.module.css","modals/AlertModal.module.css","components/Popup.module.css","layout/Footer.module.css","components/Notes.module.css","context/generateId.js","context/getLocalStoragePosts.js","hooks/useRequest.js","context/PostContext.js","layout/Nav.js","layout/Footer.js","layout/Layout.js","modals/AlertModal.js","components/AddNote.js","components/Delete.js","components/Note.js","components/Notes.js","modals/EditModal.js","components/EditRoute.js","components/Popup.js","pages/Main.js","pages/Auth.js","App.js","index.js"],"names":["module","exports","generateId","char","capChar","toUpperCase","toRandom","answer","i","Math","floor","random","length","DEFAULT_POSTS","_id","item","des","date","Date","getTime","getLocalStoragePosts","localStoragePosts","localStorage","getItem","updated","JSON","parse","parsedPosts","reversedPosts","reverse","setItem","stringify","reversedArray","useRequest","logOut","useContext","PostContext","requestData","a","options","method","headers","body","credentials","fetch","then","response","ok","json","status","Error","data","id","toString","res","getPostsAndUserName","useCallback","userData","initialPosts","posts","userName","isLoggedIn","console","log","message","addPost","editPost","deletePost","React","createContext","logIn","isLoading","getData","turnPendingOn","offlineInitiated","initOffline","trialInitiated","initTrial","PostContextProvider","props","useState","setPosts","setIsLoggedIn","setUserName","setIsLoading","setOfflineInitiated","setTrialInitiated","transformedPosts","map","x","pending","context","prev","filter","Provider","value","children","Header","className","styles","isActive","route","to","Footer","footer","Layout","ModalOverlay","onClick","onClose","modalBackdrop","modalBox","modalContent","Alert","ReactDOM","createPortal","document","querySelector","AddNote","titleRef","useRef","desRef","expanded","setExpanded","alertMessage","setAlertMessage","alertOn","setAlertOn","addPostRequest","setPending","closeModal","window","onkeydown","e","key","preventDefault","cursorNone","cursorPointer","onKeyDown","current","focus","type","placeholder","autoComplete","ref","trim","requestToAddPost","addRequestResponse","newItemId","getDate","newPosts","CircularProgress","color","Delete","deletePostRequest","requestToDelete","size","classProp","Note","getMonth","getFullYear","noTitle","withTitle","ShowNote","notes","postId","useParams","thePost","find","editPostRequest","navigate","useNavigate","borderStyle","setBorderStyle","desBorderStyle","setDesBorderStyle","handleSubmit","setTitleRed","setTimeout","setDesRed","requestToEdit","replace","handleCancel","useEffect","onSubmit","modalInput","style","modalTextarea","modalButtons","EditModal","EditRoute","path","element","Popup","extraText","button","Main","Fragment","Auth","usernameRef","passwordRef","registering","setRegistering","pendingLogin","setPendingLogin","pendingLogout","setPendingLogout","mainAuth","logoutButton","catch","err","toggleAuth","username","password","htmlFor","labelUsernamePassword","name","submitAuth","googleAuth","googleA","href","App","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dfd55d96.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainAuth\":\"Auth_mainAuth__2ZaZ0\",\"two-buttons\":\"Auth_two-buttons__WhNwd\",\"googleAuth\":\"Auth_googleAuth__3v-IN\",\"googleA\":\"Auth_googleA__1NmnJ\",\"toggleAuth\":\"Auth_toggleAuth__1_tZS\",\"submitAuth\":\"Auth_submitAuth__3-hrr\",\"logoutButton\":\"Auth_logoutButton__1Q9iA\",\"spinner-ui\":\"Auth_spinner-ui__16gXx\",\"labelUsernamePassword\":\"Auth_labelUsernamePassword__2VK9P\",\"userName\":\"Auth_userName__2pbIz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noTitle\":\"Note_noTitle__3yhs-\",\"withTitle\":\"Note_withTitle__3Kw89\",\"Item-block\":\"Note_Item-block__3tgU5\",\"description-text\":\"Note_description-text__3dt3t\",\"item-block-footer\":\"Note_item-block-footer__2wNfO\",\"date-text\":\"Note_date-text__3BMF6\",\"footer-buttons\":\"Note_footer-buttons__3r1ym\",\"spinner-ui\":\"Note_spinner-ui__3dbuM\",\"item-block-flex-container\":\"Note_item-block-flex-container__glae5\",\"item-block-flex-footer\":\"Note_item-block-flex-footer__1Uvhb\",\"item-block-flex-body\":\"Note_item-block-flex-body__27nY9\",\"footer-date\":\"Note_footer-date__12Frm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cursorNone\":\"AddNote_cursorNone__d9LIG\",\"cursorPointer\":\"AddNote_cursorPointer__1F34S\",\"Add-item\":\"AddNote_Add-item__3Vgbj\",\"title-input\":\"AddNote_title-input__nPgHt\",\"Two-input\":\"AddNote_Two-input__2V-Uv\",\"spinner-ui\":\"AddNote_spinner-ui__118O-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-nav\":\"Nav_main-nav__3LSxB\",\"route\":\"Nav_route__3xW3k\",\"route-active\":\"Nav_route-active__24Xg2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalBackdrop\":\"EditModal_modalBackdrop__3QvLq\",\"modalBox\":\"EditModal_modalBox__2wodi\",\"modalInput\":\"EditModal_modalInput__3ITpW\",\"modalTextarea\":\"EditModal_modalTextarea__11_oI\",\"modalButtons\":\"EditModal_modalButtons__1PPq9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalBackdrop\":\"AlertModal_modalBackdrop__gkwGj\",\"modalBox\":\"AlertModal_modalBox__1E7Of\",\"modalContent\":\"AlertModal_modalContent__3saFV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pop-up\":\"Popup_pop-up__3AX5t\",\"button-container\":\"Popup_button-container__I1CYw\",\"button\":\"Popup_button__2M-QY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__Uthdt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notes\":\"Notes_notes__VPg_J\"};","export default function generateId() {\r\n    const char = \"abcdefghijklmnopqrstuvwxyz\";\r\n    const capChar = char.toUpperCase();\r\n    const num = \"1234567890\";\r\n    const toRandom = char + capChar + num;\r\n  \r\n    let answer =\"\";\r\n    for (let i=0;i < 30; i++) {\r\n      answer = answer + toRandom[Math.floor(Math.random() * toRandom.length)];\r\n    }\r\n    return answer;\r\n}","import generateId from \"./generateId\";\r\n\r\nconst DEFAULT_POSTS = [\r\n    {_id: generateId(), item: \"โพสต์แรกของฉัน\", des:\"ดูแลสุขภาพด้วยงับ\", date: new Date().getTime()},\r\n    {_id: generateId(), item: \"ประชุมเช้า\", des:\"วันพุธ เข้าzoomก่อน 10 โมง\", date: new Date().getTime()},\r\n    {_id: generateId(), item: \"จันทร์หน้า\", des:\"ทำ OT ...\", date: new Date().getTime()},\r\n    {_id: generateId(), item: \"หยุดปีใหม่\", des:\"วันศุกร์หน้าแล้ว!\", date: new Date().getTime()}\r\n];\r\n\r\nexport default function getLocalStoragePosts() {\r\n\r\n    const localStoragePosts = localStorage.getItem(\"myPostIt\");\r\n    const updated = localStorage.getItem(\"myPostItUpdate\");\r\n\r\n    //updated - just retrieve all local posts\r\n    if (localStoragePosts && updated) {\r\n        const parsedPosts = JSON.parse(localStoragePosts);\r\n        return parsedPosts; \r\n    }\r\n\r\n    // never updated - reverse posts first then use it\r\n    else if (localStoragePosts && !updated) {\r\n        const parsedPosts = JSON.parse(localStoragePosts);\r\n        const reversedPosts = [...parsedPosts].reverse();\r\n        localStorage.setItem(\"myPostIt\", JSON.stringify(reversedPosts));\r\n        localStorage.setItem(\"myPostItUpdate\", JSON.stringify({reversedArray: true}));\r\n        return reversedPosts;\r\n    }\r\n\r\n    //default (never use)\r\n    else if (!localStoragePosts) {\r\n        localStorage.setItem(\"myPostIt\", JSON.stringify(DEFAULT_POSTS));\r\n        localStorage.setItem(\"myPostItUpdate\", JSON.stringify({reversedArray: true}));\r\n        return DEFAULT_POSTS;\r\n    }\r\n\r\n    else {\r\n        return [];\r\n    }\r\n}","import { useCallback, useContext } from \"react\";\r\nimport getLocalStoragePosts from \"../context/getLocalStoragePosts\";\r\nimport PostContext from \"../context/PostContext\";\r\n\r\nexport default function useRequest() {\r\n\r\n    const {logOut} = useContext(PostContext);\r\n    \r\n    const getPostsAndUserName = useCallback( async() => {\r\n        let initialPosts;\r\n        let userName;\r\n        let isLoggedIn;\r\n\r\n        try {\r\n          const response = await fetch(\"/api/user\",{credentials:\"include\"});\r\n          if (!response.ok) throw new Error(\"offline mode activated\");\r\n          const userData = await response.json();\r\n          initialPosts = userData.posts;\r\n          userName = userData.userName;\r\n          isLoggedIn = true;\r\n        }\r\n        \r\n        catch (err) {\r\n          const localStoragePosts = getLocalStoragePosts();\r\n          initialPosts = localStoragePosts;\r\n          userName = null;\r\n          isLoggedIn = false;\r\n          console.log(err.message || \"getting posts failed.\");\r\n        }\r\n        \r\n        return {\r\n            posts: initialPosts,\r\n            isLoggedIn: isLoggedIn,\r\n            userName: userName\r\n        } \r\n    }, []);\r\n    \r\n    async function addPost(requestData) {\r\n        const options = {\r\n            method:\"POST\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({ item: requestData.item, des: requestData.des }),\r\n            credentials: \"include\"\r\n        }\r\n\r\n        return fetch(\"/api/posts\", options)\r\n        .then((response) => {\r\n            if (response.ok) {\r\n              return response.json();\r\n            } else if (response.status === 400) {\r\n              throw new Error(\"No information sent\");\r\n            } else {\r\n              logOut();\r\n              throw new Error(\"No authentication\");\r\n            }\r\n        })\r\n        .then(data => {\r\n            return {\r\n                id: data.id,\r\n                date: data.date\r\n            }\r\n        })\r\n    }\r\n\r\n    async function deletePost(requestData) {\r\n        return fetch(\"/api/posts/\"+ requestData.id.toString(), {method:\"DELETE\", credentials: \"include\"})\r\n        .then((res) => {\r\n            if (res.ok) {\r\n                return \"success\";\r\n            } else if (res.status === 403) {\r\n                logOut();\r\n                throw new Error(\"No authentication\");\r\n            } else {\r\n                logOut();\r\n                throw new Error(\"deleting failed.\")\r\n            }\r\n        })\r\n    }\r\n\r\n    async function editPost(requestData) {\r\n        const options = {\r\n            method:\"PATCH\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({item: requestData.item, des:requestData.des}),\r\n            credentials: \"include\"\r\n        }\r\n\r\n        return fetch(\"/api/posts/\" + requestData.id, options)\r\n        .then(response => {\r\n            if(response.ok) {\r\n                return \"success\";\r\n            } else if (response.status === 400) {\r\n                throw new Error(\"No information sent\")\r\n            } else if (response.status === 403) {\r\n                logOut();\r\n                throw new Error(\"No authentication\")\r\n            } else {\r\n                logOut();\r\n                throw new Error(\"updating failed.\")\r\n            }\r\n        })\r\n    }\r\n    return {getPostsAndUserName, addPost, editPost, deletePost};\r\n}","import React, { useCallback, useState } from \"react\";\r\nimport useRequest from \"../hooks/useRequest\";\r\n\r\nconst PostContext = React.createContext(\r\n  {\r\n    logIn: () => {},\r\n    logOut: () => {},\r\n    isLoggedIn: null,\r\n    isLoading: null,\r\n    userName: null,\r\n    getData: () => {},\r\n    posts: [],\r\n    addPost: (id,item,des,date) => {},\r\n    deletePost:(id) => {},\r\n    editPost: (id, item, des) => {},\r\n    turnPendingOn: (id) => {},\r\n    offlineInitiated: null,\r\n    initOffline: () => {},\r\n    trialInitiated: null,\r\n    initTrial: () => {}\r\n  }\r\n);\r\n\r\nfunction PostContextProvider(props) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [ isLoggedIn, setIsLoggedIn ] = useState(false);\r\n  const [ userName, setUserName ] = useState(\"\");\r\n  const [ isLoading, setIsLoading ] = useState(false);\r\n  const { getPostsAndUserName } = useRequest();\r\n\r\n  const [offlineInitiated, setOfflineInitiated] = useState(false);\r\n  const [trialInitiated, setTrialInitiated] = useState(false);\r\n  \r\n  const getData = useCallback( async() => {\r\n    setIsLoading(true);\r\n    const data = await getPostsAndUserName();\r\n    const transformedPosts = data.posts.map(x => {\r\n      return{...x, pending: false}\r\n    });\r\n    setPosts(transformedPosts);\r\n    setIsLoggedIn(data.isLoggedIn);\r\n    setOfflineInitiated(data.isLoggedIn);\r\n    setUserName(data.userName);\r\n    setIsLoading(false);\r\n  }, [getPostsAndUserName]);\r\n  \r\n  function logIn() {\r\n    setIsLoggedIn(true);\r\n    getData();\r\n  }\r\n\r\n  function logOut() {\r\n    setIsLoggedIn(false);\r\n    getData();\r\n  }\r\n\r\n  function addPost(id,item,des,date) {\r\n    setPosts(prev => {\r\n      return [...prev,{\r\n        _id: id,\r\n        item: item,\r\n        des: des,\r\n        date: date,\r\n      }]\r\n    })\r\n  }\r\n\r\n  function deletePost(id) {\r\n    setPosts(prev => {\r\n      return prev.filter((x) => x._id.toString() !== id.toString());\r\n    })  \r\n  }\r\n\r\n  function editPost(id, item, des) {\r\n    if (isLoggedIn) {\r\n      setPosts(prev => {\r\n        return prev.map((x) => (x._id.toString() === id.toString() ? { ...x, item: item, des: des, pending: false } : x))\r\n      })\r\n    } else if (!isLoggedIn) {\r\n      setPosts(prev => {\r\n        return prev.map((x) => (x._id.toString() === id.toString() ? { ...x, item: item, des: des} : x))\r\n      })\r\n    }\r\n  }\r\n\r\n  function turnPendingOn(id) {\r\n    setPosts(prev => {\r\n      return prev.map(x => x._id.toString() === id.toString() ? {...x, pending: true} : x)\r\n    });\r\n  }\r\n\r\n  function initTrial() {\r\n    setTrialInitiated(true);\r\n  }\r\n\r\n  function initOffline() {\r\n    setOfflineInitiated(true);\r\n  }\r\n\r\n  const context = {\r\n    // authen\r\n    logIn,\r\n    logOut,\r\n    isLoggedIn,\r\n\r\n    //loading and username\r\n    isLoading,\r\n    userName,\r\n\r\n    // posts\r\n    getData,\r\n    posts,\r\n    addPost,\r\n    deletePost,\r\n    editPost,\r\n\r\n    //pending for editting\r\n    turnPendingOn,\r\n\r\n    // trialInitiated\r\n    offlineInitiated,\r\n    initOffline,\r\n    trialInitiated,\r\n    initTrial\r\n  };\r\n\r\n  return (\r\n    <PostContext.Provider value={context}>\r\n      {props.children}\r\n    </PostContext.Provider>\r\n  );\r\n}\r\n\r\nexport default PostContext;\r\nexport { PostContextProvider };","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport styles from \"./Nav.module.css\";\r\n\r\nexport default function Header() {\r\n  return (\r\n    <div className={styles[\"main-nav\"]}>\r\n      <NavLink\r\n        className={({ isActive }) => (isActive ? styles[\"route-active\"] : styles.route)}\r\n        to=\"/posts\"\r\n      >\r\n        โพสต์อิท\r\n      </NavLink>\r\n      <NavLink\r\n        className={({ isActive }) => (isActive ? styles[\"route-active\"] : styles.route)}\r\n        to=\"/account\"\r\n      >\r\n        บัญชี\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport styles from \"./Footer.module.css\"; \r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer className={styles.footer}>\r\n            <p>Copyright 2022 © created and designed by Kiart Tantasi</p>\r\n        </footer>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Nav from \"./Nav\";\r\nimport Footer from \"./Footer\";\r\n\r\nexport default function Layout(props) {\r\n  return (\r\n    <>\r\n      <Nav />\r\n      {props.children}\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport styles from \"./AlertModal.module.css\";\r\n\r\n\r\nconst ModalOverlay =(props) => {\r\n    return (\r\n        <div>\r\n            <div onClick={props.onClose} className={` ${styles.modalBackdrop} close-modal`}></div>\r\n            <div className={`${styles.modalBox} ${styles.modalContent}`}>\r\n                <h1>{props.message}</h1>\r\n                <button onClick={props.onClose}>ปิด</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function Alert(props) {\r\n\r\n    return (\r\n        <>\r\n        {ReactDOM.createPortal(<ModalOverlay message={props.message} onClose={props.onClose} />,document.querySelector(\"#modals\"))}\r\n        </>\r\n    )\r\n}\r\n","import styles from \"./AddNote.module.css\"\r\nimport React, { useState, useRef, useContext } from \"react\";\r\nimport PostContext from \"../context/PostContext\";\r\nimport Alert from \"../modals/AlertModal\";\r\nimport generateId from \"../context/generateId\";\r\nimport useRequest from \"../hooks/useRequest\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nexport default function AddNote() {\r\n  const titleRef = useRef();\r\n  const desRef = useRef();\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [alertMessage,setAlertMessage] = useState(\"\");\r\n  const [alertOn, setAlertOn] = useState(false);\r\n  const { posts, addPost, isLoggedIn} = useContext(PostContext);\r\n  const { addPost: addPostRequest } = useRequest();\r\n  const [pending, setPending] = useState(false);\r\n\r\n  function handleTitleOn() {\r\n    if (expanded === false) {\r\n      setExpanded(true);\r\n    }\r\n  }\r\n\r\n  function handleTitleKeyPress(e) {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      desRef.current.focus();\r\n    }\r\n  }\r\n\r\n  function handleDesKeyDown(e) {\r\n    if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      titleRef.current.focus();\r\n    }\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // FAILED\r\n    if (expanded === false) {\r\n      setAlertMessage(\"โปรดระบุข้อความ\");\r\n      setAlertOn(true);\r\n      return;\r\n    }\r\n    const item = titleRef.current.value.trim() || \"\";\r\n    const des = desRef.current.value.trim() || \"\";\r\n    if (!item && !des) {\r\n      setAlertMessage(\"โปรดระบุข้อความ\");\r\n      setAlertOn(true);\r\n      return;\r\n    }\r\n    if (item.length > 25) {\r\n      setAlertMessage(\"หัวข้อยาวเกินไป\");\r\n      setAlertOn(true);\r\n      return;\r\n    }\r\n    if (item.length !== 0 && des.length > 95) {\r\n      setAlertMessage(\"รายละเอียดยาวเกินไป\");\r\n      setAlertOn(true);\r\n      return;\r\n    } else if (item.length === 0 && des.length > 120) {\r\n      setAlertMessage(\"รายละเอียดยาวเกินไป\");\r\n      setAlertOn(true);\r\n      return;\r\n    }\r\n\r\n    // SUCCESS\r\n    //online adding\r\n    if (isLoggedIn) {\r\n      setPending(true);\r\n      async function requestToAddPost() {\r\n        try {\r\n          const addRequestResponse = await addPostRequest({item:item,des:des});\r\n          addPost(addRequestResponse.id,item,des,addRequestResponse.date);\r\n          setPending(false);\r\n        } catch (err) {\r\n          console.log(err.message);\r\n          if (err.message === \"No information sent\") {\r\n            setPending(false);\r\n          }\r\n        }\r\n      }\r\n      requestToAddPost();\r\n    //offline adding\r\n    } else {\r\n      const newItemId = generateId();\r\n      const getDate = new Date().getTime();\r\n      const newPosts = [\r\n        ...posts,{\r\n          _id: newItemId,\r\n          item: item,\r\n          des: des,\r\n          date: getDate,\r\n        }\r\n      ];\r\n      localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n      addPost(newItemId, item, des, getDate);\r\n    }\r\n    \r\n    titleRef.current.value = \"\";\r\n    desRef.current.value = \"\";\r\n    desRef.current.focus();\r\n  }\r\n\r\n  function closeModal() {\r\n    setAlertOn(false);\r\n  }\r\n\r\n  window.onkeydown = (e) => {\r\n    if (alertOn) {\r\n      if (e.key === \"Enter\" || e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        closeModal();\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n    {alertOn && <Alert message={alertMessage} onClose={closeModal} />}\r\n    <div className={styles[\"Add-item\"]}>\r\n      <form>\r\n        <div className={` ${styles[\"Two-input\"]} ${expanded ? styles.cursorNone : styles.cursorPointer}`}>\r\n          {expanded && <input\r\n            className={styles[\"title-input\"]}\r\n            onKeyDown={handleTitleKeyPress}\r\n            type=\"text\"\r\n            placeholder=\"หัวข้อ (optional)\"\r\n            autoComplete=\"off\"\r\n            ref={titleRef}\r\n          ></input>}\r\n          \r\n          <input\r\n            className={styles[\"des-input\"]}\r\n            onClick={handleTitleOn}\r\n            onKeyDown={handleDesKeyDown}\r\n            type=\"text\"\r\n            placeholder=\"โพสต์อิท !\"\r\n            autoComplete=\"off\"\r\n            ref={desRef}\r\n          ></input>\r\n\r\n        </div>\r\n        {!pending && <button\r\n          type=\"submit\"\r\n          onClick={handleSubmit}\r\n        >\r\n          <AddIcon />\r\n        </button>}\r\n      </form>\r\n      {pending && <CircularProgress color=\"inherit\" className={styles[\"spinner-ui\"]} />}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport PostContext from \"../context/PostContext\";\r\nimport useRequest from \"../hooks/useRequest\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nexport default function Delete(props) {\r\n\r\n    const { posts, deletePost, isLoggedIn } = useContext(PostContext);\r\n    const [pending, setPending] = useState(false);\r\n    const { deletePost: deletePostRequest } = useRequest();\r\n    const id = props.id;\r\n  \r\n    function handleDelete() {\r\n        //online deleting\r\n        if (isLoggedIn) {\r\n            setPending(true);\r\n            async function requestToDelete() {\r\n                try {\r\n                    await deletePostRequest({id: id.toString()});\r\n                    deletePost(id);\r\n                } catch(err) {\r\n                    console.log(err.message || \"delete request failed.\");\r\n                }\r\n            }\r\n            requestToDelete();\r\n            \r\n        //offline deleting\r\n        } else {\r\n            const newPosts = posts.filter((x) => x._id.toString() !== id.toString());\r\n            localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n            deletePost(id);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <button className=\"delete-button\" onClick={handleDelete}>\r\n            {!pending && <DeleteIcon />}\r\n            {pending && <CircularProgress size={20} color=\"inherit\" className={props.classProp} />}\r\n        </button>\r\n        </>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport Delete from \"../components/Delete\";\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { Link } from \"react-router-dom\";\r\nimport styles from \"./Note.module.css\";\r\n\r\n\r\nexport default function Note(props) {\r\n  const date = new Date(props.date).getDate().toString() + \"/\" + ( new Date(props.date).getMonth() + 1 ).toString() + \"/\" + new Date(props.date).getFullYear().toString() || \"no date described.\";\r\n  const pending = props.pending;\r\n\r\n  return (\r\n    <div className={styles[\"Item-block\"]}>\r\n\r\n      <div className={styles[\"item-block-flex-container\"]}>\r\n        <div className={styles[\"item-block-flex-body\"]}>\r\n          <h3>{props.item}</h3>\r\n          <p className={` ${styles[\"description-text\"]} ${(props.item === \"\") ? styles.noTitle : styles.withTitle}`}>{props.des}</p>\r\n        </div>\r\n\r\n        <div className={` ${styles[\"item-block-footer\"]} ${styles[\"item-block-flex-footer\"]} `}>\r\n          <div className={styles[\"footer-date\"]}>\r\n            <p className={styles[\"date-text\"]}>{date}</p>\r\n          </div>\r\n          <div className={styles[\"footer-buttons\"]}>\r\n            {pending && <CircularProgress size={20} color=\"inherit\" className={styles[\"spinner-ui\"]} />}\r\n            {!pending && <Link to={`/posts/edit/${props.id}`}><button><EditIcon className=\"edit-icon\" /></button></Link>}\r\n            <Delete id={props.id} classProp={styles[\"spinner-ui\"]} />\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useContext } from \"react\";\r\nimport Note from \"./Note\";\r\nimport PostContext from \"../context/PostContext\";\r\nimport styles from \"./Notes.module.css\";\r\n\r\nexport default function ShowNote() {\r\n  const { posts } = useContext(PostContext);\r\n  const reversedPosts = [...posts].reverse();\r\n\r\n  return (\r\n    <div className={styles.notes}>      \r\n      {reversedPosts.map((x) => {\r\n        return (\r\n          <Note\r\n            key={x._id}\r\n            id={x._id}\r\n            item={x.item}\r\n            des={x.des}\r\n            date={x.date}\r\n            pending={x.pending}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}","import React, {useRef, useContext, useEffect, useState} from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport PostContext from \"../context/PostContext\";\r\nimport useRequest from \"../hooks/useRequest\";\r\nimport styles from \"./EditModal.module.css\";\r\n\r\nfunction ModalOverlay() {\r\n    const { postId } = useParams();\r\n    const { isLoggedIn, posts, editPost, turnPendingOn } = useContext(PostContext);\r\n    const thePost = posts.find(x => x._id.toString() === postId);\r\n    const { editPost: editPostRequest } = useRequest();\r\n    const navigate = useNavigate();\r\n    const titleRef = useRef();\r\n    const desRef = useRef();\r\n    const [ borderStyle, setBorderStyle ] = useState({\"border\":\"1px solid rgba(0,0,0,0.5)\"});\r\n    const [ desBorderStyle, setDesBorderStyle ] = useState({\"border\":\"1px solid rgba(0,0,0,0.5)\"});\r\n\r\n    useEffect(() => {\r\n        if (thePost) {\r\n            titleRef.current.value = thePost.item || \"\";\r\n            desRef.current.value = thePost.des || \"\";\r\n            desRef.current.focus();\r\n        } else {\r\n            console.log(\"loading data for editing...\")\r\n        }\r\n    }, [thePost])\r\n\r\n    function handleTitleKeyDown(e) {\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            desRef.current.focus();\r\n        }\r\n    }\r\n    function handleDesKeyDown(e) {\r\n        if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n            handleSubmit(e);\r\n        }\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        \r\n        const id = postId;\r\n        const item = titleRef.current.value.trim();\r\n        const des = desRef.current.value.trim();\r\n\r\n        // functions to red the input and textarea\r\n        function setTitleRed() {\r\n            setBorderStyle({\"border\":\"1px solid red\"});\r\n            setTimeout(() => {\r\n                setBorderStyle({\"border\":\"1px solid rgba(0,0,0,0.5)\"});\r\n            }, 3000);\r\n        }\r\n        function setDesRed() {\r\n            setDesBorderStyle({\"border\":\"1px solid red\"});\r\n            setTimeout(() => {\r\n                setDesBorderStyle({\"border\":\"1px solid rgba(0,0,0,0.5)\"});\r\n            }, 3000);\r\n        }\r\n\r\n        if (item === thePost.item && des === thePost.des) { // no changes\r\n            console.log(\"no changes found.\");\r\n            navigate(\"/posts\");\r\n            return;\r\n        }\r\n        if (item.length === 0 && des.length === 0) { // empty values\r\n            setTitleRed();\r\n            setDesRed();\r\n            return;\r\n        }\r\n        if (item.length > 25 && des.length > 95) { // tile > 25 and des > 95\r\n            setTitleRed();\r\n            setDesRed();\r\n            return;\r\n        }\r\n        if (item.length > 25) { // title > 25\r\n            setTitleRed();\r\n            return;\r\n        }\r\n        if (des.length > 95 && item.length !== 0) { // with title\r\n            setDesRed();\r\n            return;\r\n        }\r\n        if (des.length > 120 && item.length === 0) { // without title\r\n            setDesRed();\r\n            return;\r\n        }\r\n\r\n        // SUCCESS\r\n        //online updating      \r\n        if (isLoggedIn) {\r\n            turnPendingOn(id);\r\n            async function requestToEdit() {\r\n                try {\r\n                    await editPostRequest({item:item,des:des,id:id});\r\n                    editPost(id,item,des);\r\n                } catch(err) {\r\n                    console.log(err);\r\n                }\r\n            }\r\n            requestToEdit();\r\n        //offline updating\r\n        } else {\r\n            const newPosts = posts.map((x) => (x._id.toString() === id.toString() ? { ...x, item: item, des: des } : x));\r\n            localStorage.setItem(\"myPostIt\", JSON.stringify(newPosts));\r\n            editPost(id,item,des);\r\n        }\r\n        navigate(\"/posts\", {replace:true});\r\n    }\r\n\r\n    function handleCancel() {\r\n        navigate(\"/posts\",{ replace: true });        \r\n    }\r\n\r\n    window.onkeydown = (e) => {\r\n        if (e.key === \"Escape\") {\r\n            e.preventDefault();\r\n            handleCancel();\r\n        }\r\n      }\r\n\r\n    return (\r\n        <div>\r\n            <div onClick={handleCancel} className={`backdrop-div ${styles.modalBackdrop}`}></div>\r\n            <div className={styles.modalBox}>\r\n                <form onSubmit={handleSubmit}>\r\n                    <input type=\"text\" ref={titleRef} className={styles.modalInput} style={borderStyle} onKeyDown={handleTitleKeyDown} />\r\n                    <br/><br/>\r\n                    <textarea onKeyDown={handleDesKeyDown} type=\"text\" ref={desRef} className={styles.modalTextarea} style={desBorderStyle} />\r\n                    <div className={styles.modalButtons}>\r\n                        <button type=\"button\" onClick={handleCancel}>ยกเลิก</button>\r\n                        <button type=\"submit\">อัปเดต</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function EditModal () {\r\n    return (\r\n        <>\r\n        {ReactDOM.createPortal(<ModalOverlay />, document.querySelector(\"#edit-modal\"))}\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport EditModal from \"../modals/EditModal\";\r\nimport {Routes, Route} from \"react-router-dom\";\r\n\r\nexport default function EditRoute() {\r\n    return (\r\n        <Routes>\r\n            <Route path=\"edit\">\r\n                <Route path=\":postId\" element={<EditModal />} />\r\n            </Route>\r\n        </Routes>\r\n    )\r\n}\r\n","import styles from \"./Popup.module.css\";\r\n\r\nimport React from 'react';\r\n\r\nexport default function Popup(props) {\r\n  return (\r\n    <div className={styles[\"pop-up\"]}>\r\n        <p>{props.children}</p>\r\n        {props.extraText && <p>{props.extraText}</p>}\r\n        <div className={styles[\"button-container\"]}>\r\n            <button className={styles.button} onClick={props.onClick}>ปิด</button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react';\r\nimport PostContext from '../context/PostContext';\r\n\r\nimport AddNote from '../components/AddNote';\r\nimport Notes from \"../components/Notes\";\r\nimport Edit from \"../components/EditRoute\";\r\nimport Popup from '../components/Popup';\r\n\r\nexport default function Main() {\r\n\r\n    const {offlineInitiated, initOffline} = useContext(PostContext);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {!offlineInitiated && <Popup onClick={initOffline}>คุณกำลังใช้งานโหมดออฟไลน์</Popup>}\r\n            <AddNote />\r\n            <Notes />\r\n            <Edit />\r\n        </React.Fragment>\r\n    )\r\n}\r\n","import React, { useContext, useRef, useState } from 'react'\r\nimport PostContext from '../context/PostContext';\r\nimport styles from \"./Auth.module.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Alert from '../modals/AlertModal';\r\nimport Popup from \"../components/Popup\";\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nexport default function Auth() {\r\n    const { isLoggedIn, logIn, logOut, userName, trialInitiated, initTrial } = useContext(PostContext);\r\n    const usernameRef = useRef(\"\");\r\n    const passwordRef = useRef(\"\");\r\n    const navigate = useNavigate();\r\n    const [ registering, setRegistering ] = useState(false);\r\n    const [alertMessage,setAlertMessage] = useState(\"\");\r\n    const [alertOn, setAlertOn] = useState(false);\r\n    const [pendingLogin, setPendingLogin] = useState(false);\r\n    const [pendingLogout, setPendingLogout] = useState(false);\r\n\r\n    function handleToggle() {\r\n        setRegistering(!registering);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        const username = usernameRef.current.value;\r\n        const password = passwordRef.current.value;\r\n        if (!username || !password) {\r\n            setAlertMessage(\"โปรดระบุ username และ password\");\r\n            setAlertOn(true);\r\n            return;\r\n        }\r\n        const options = {\r\n            method:\"POST\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({username:username, password:password}),\r\n            credentials: \"include\"\r\n        }\r\n        // register\r\n        if (registering) {\r\n            setPendingLogin(true);\r\n            fetch(\"/api/register\", options)\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    console.log(\"registered successfully\");\r\n                    usernameRef.current.value = \"\";\r\n                    passwordRef.current.value = \"\";\r\n                    setPendingLogin(false);\r\n                    setAlertMessage(\"ลงทะเบียนสำเร็จ\");\r\n                    setAlertOn(true);\r\n                    setRegistering(false);\r\n                } else if (res.status === 403) {\r\n                    setPendingLogin(false);\r\n                    setAlertMessage(\"username นี้ถูกใช้งานแล้ว\");\r\n                    setAlertOn(true);\r\n                } else {\r\n                    setPendingLogin(false);\r\n                    setAlertMessage(\"การลงทะเบียนล้มเหลว\");\r\n                    setAlertOn(true);\r\n                }\r\n            })\r\n        // log in\r\n        } else if (!registering) {\r\n            setPendingLogin(true);\r\n            fetch(\"/api/login\", options)\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    console.log(\"logged in successfully\");\r\n                    logIn();\r\n                    navigate(\"/posts\",{ replace: true });\r\n                } else if (res.status === 401) {\r\n                    setPendingLogin(false);\r\n                    setAlertMessage(\"username หรือ password ไม่ถูกต้อง\");\r\n                    setAlertOn(true);\r\n                } else {\r\n                    setPendingLogin(false);\r\n                    setAlertMessage(\"การเข้าสู่ระบบล้มเหลว\");\r\n                    setAlertOn(true);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                setPendingLogin(false);\r\n                console.log(err.message);\r\n            });\r\n        }\r\n    }\r\n\r\n    function handleLogOut() {\r\n        setPendingLogout(true);\r\n        fetch(\"/api/logout\", {credentials:\"include\", method:\"POST\"})\r\n        .then(res => {\r\n          if (res.ok) {\r\n            console.log(\"logged out successfully\");\r\n            logOut();\r\n          } else {\r\n              logOut();\r\n              throw new Error(\"failed logging out.\")\r\n          }\r\n        })\r\n        .catch(err => console.log(err.message));\r\n    }\r\n\r\n    function closeModal() {\r\n        setAlertOn(false);\r\n    }\r\n\r\n    function handleEnterFlow(e) {\r\n        if (e.key === \"Enter\") {\r\n            e.preventDefault();\r\n            passwordRef.current.focus();\r\n        }\r\n    }\r\n\r\n    window.onkeydown = (e) => {\r\n        if (alertOn) {\r\n          if (e.key === \"Enter\" || e.key === \"Escape\") {\r\n            e.preventDefault();\r\n            closeModal();\r\n          }\r\n        }\r\n    }\r\n\r\n    if (!isLoggedIn) {\r\n        return (\r\n            <>\r\n            {alertOn && <Alert message={alertMessage} onClose={closeModal} />}\r\n            {!trialInitiated && <Popup onClick={initTrial} extraText=\"password = my_password_123\">ทดลองใช้งาน username = admin</Popup>}\r\n            <div className={styles.mainAuth}>\r\n                <button className={`${styles.toggleAuth} ${styles[\"two-buttons\"]} `} onClick={handleToggle}>ต้องการ{(registering) ? \"เข้าสู่ระบบ\" : \"สมัครใช้งาน\"}</button>\r\n                <br/><br/>\r\n                <form onSubmit={handleSubmit}>\r\n                    <label htmlFor=\"username\" className={styles.labelUsernamePassword}>username</label>\r\n                    <br/>\r\n                    <input type=\"text\" ref={usernameRef} name=\"username\" autoComplete=\"off\" onKeyDown={handleEnterFlow} />\r\n                    <br/><br/>\r\n                    <label htmlFor=\"password\" className={styles.labelUsernamePassword}>password</label>\r\n                    <br/>\r\n                    <input type=\"password\" ref={passwordRef} name=\"password\" autoComplete=\"off\" />\r\n                    <br/><br/>\r\n                    {!pendingLogin && <button className={`${styles.submitAuth} ${styles[\"two-buttons\"]}`} type=\"submit\">{(registering) ? \"ลงทะเบียน\" : \"เข้าสู่ระบบ\"}</button>}\r\n                    {pendingLogin && <CircularProgress size={25} color=\"inherit\" className={styles[\"spinner-ui\"]} />}\r\n                    <br/><br/>\r\n                    <button type=\"button\" className={styles.googleAuth}><a className={styles.googleA} href=\"/api/auth/google\">เข้าสู่ระบบ/สมัครด้วย GOOGLE ACCOUNT</a></button>\r\n                    {/* when testing on 3000, use below */}\r\n                    {/* <button type=\"button\" className={styles.googleAuth}><a className={styles.googleA} href=\"http://localhost:4000/api/auth/google\">เข้าสู่ระบบ/สมัครโดย GOOGLE (3000)</a></button> */}\r\n                </form>\r\n            </div>\r\n            </>\r\n        )\r\n    }\r\n    return (\r\n        <div className={styles.mainAuth}>\r\n            {!pendingLogout && <h1 className={styles.userName}>{userName || \"\"}</h1>}\r\n            <br/>\r\n            {!pendingLogout && <button className={styles.logoutButton} type=\"button\" onClick={handleLogOut}>ออกจากระบบ</button>}\r\n            {pendingLogout && <CircularProgress color=\"inherit\" className={styles[\"spinner-ui\"]} />}\r\n            <br/><br/>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { Routes, Route, Navigate } from \"react-router-dom\";\r\nimport PostContext from \"./context/PostContext\";\r\nimport Layout from \"./layout/Layout\";\r\nimport Main from \"./pages/Main\";\r\nimport Auth from \"./pages/Auth\";\r\nimport \"./App.css\";\r\n\r\nexport default function App() {\r\n  const { getData, isLoading} = useContext(PostContext);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [getData]);\r\n\r\n  if (isLoading) {\r\n    return <div>\r\n      <h1 className=\"loading-text\">LOADING...</h1>\r\n    </div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-container\">\r\n      <Layout>\r\n      <div className=\"flex-main-body\">\r\n      <Routes>\r\n        <Route path=\"/posts/*\" element={<Main />} />\r\n        <Route path=\"/account\" element={<Auth />} />\r\n        <Route path=\"/*\" element={<Navigate to=\"/posts\" />} />\r\n      </Routes>\r\n      </div>\r\n      </Layout>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport { PostContextProvider } from \"./context/PostContext\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <PostContextProvider>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </PostContextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}